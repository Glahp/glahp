<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AuraAI</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Intro Screen -->
  <div id="intro-screen">
    <h1 id="intro-title">AuraAI</h1>
    <button id="start-btn">Start</button>
  </div>

  <!-- Main App -->
  <div id="app" style="display: none;">
    <canvas id="bg-canvas"></canvas>
    <div id="chat-container"></div>
    <div id="options-container"></div>
  </div>

  <script>
    const introScreen = document.getElementById("intro-screen");
    const startBtn = document.getElementById("start-btn");
    const app = document.getElementById("app");
    const chatContainer = document.getElementById("chat-container");
    const optionsContainer = document.getElementById("options-container");

    startBtn.addEventListener("click", () => {
      introScreen.style.display = "none";
      app.style.display = "block";
      startConversation();
    });

    function addBotMessage(text) {
      const msg = document.createElement("div");
      msg.className = "bot-message";
      msg.textContent = text;
      chatContainer.appendChild(msg);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function addOptionButtons(options) {
      optionsContainer.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className = "option-btn";
        btn.addEventListener("click", () => handleUserInput(opt));
        optionsContainer.appendChild(btn);
      });
    }

    function handleUserInput(input) {
      const msg = document.createElement("div");
      msg.className = "user-message";
      msg.textContent = input;
      chatContainer.appendChild(msg);

      processConversation(input.toLowerCase());
    }

    function startConversation() {
      addBotMessage("How are you feeling today?");
      addOptionButtons(["Sad", "Nervous", "Angry", "Happy"]);
    }

    function processConversation(input) {
      optionsContainer.innerHTML = "";

      if (input === "sad") {
        addBotMessage("I’m sorry you’re feeling sad 💙 Want to tell me what’s on your mind? I’m here to listen. 🌸");
        addOptionButtons(["Yes", "No"]);
      }

      else if (input === "yes" && lastBotMessage().includes("want to tell")) {
        addBotMessage("Great—I'm listening. 💬");
        addBotMessage("Try this: inhale 4s, hold 4s, exhale 6s—repeat 3×. 🌬️");
        addOptionButtons(["done"]);
      }

      else if (input === "done") {
        addBotMessage("Thanks for sharing. 💙 Do you want me to suggest more ways to feel better?");
        addOptionButtons(["Yes", "No"]);
      }

      else if (input === "no") {
        addBotMessage("That’s okay 💕. I’m here if you change your mind.");
        addOptionButtons(["Back to start"]);
      }

      else if (input === "back to start") {
        startConversation();
      }

      else {
        addBotMessage("I didn’t quite catch that—want to rephrase or pick a mood above? 💙");
        addOptionButtons(["Sad", "Nervous", "Angry", "Happy"]);
      }
    }

    function lastBotMessage() {
      const messages = chatContainer.getElementsByClassName("bot-message");
      return messages[messages.length - 1]?.textContent || "";
    }
  </script>
</body>
</html>
